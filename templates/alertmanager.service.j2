[Unit]
Description=prometheus - Prometheus Alertmanager.
Documentation=https://github.com/William-Yeh/ansible-prometheus
After=network.target

[Service]
Type=simple

User={{ prometheus_user }}
Group={{ prometheus_group }}

{% if prometheus_alertmanager_opts is defined %}
Environment='ALERTMANAGER_OPTS={{ prometheus_alertmanager_opts }}'
{% else %}
Environment='ALERTMANAGER_OPTS=""'
{% endif %}

ExecStart={{ prometheus_alertmanager_daemon_dir }}/alertmanager \
  -config.file={{ prometheus_config_path }}/alertmanager.yml \
  -storage.path={{ prometheus_alertmanager_db_path }} \
  ${ALERTMANAGER_OPTS}
